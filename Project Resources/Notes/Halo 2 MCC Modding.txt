
////////////////////////
// Halo 2 MCC Modding //
////////////////////////



/*--- Overview ---*/

Mod Tools
  - Assembly: Used before official mod tools were released. Reads map files as tags and lets you
              edit those tag values directly. Can be used to compress/decompress maps.
  - Guerilla: An official, comprehensive tag editor.
  - Tool: A terribly named command line utility that does all kinds of stuff. Most important for
          us, it allows you to compile a bunch of tags into a .map file that can be played in MCC. 



/*--- Rebuilding Map from Tags in Guerilla ---*/

NOTE: Doesn't support compile flags, which is a problem for remastered campaign levels. In general
      probably just safest to do this via command line (see below).

0. Navigate to H2EK Folder via command line.

1. Open Guerrila

	guerilla.exe -tags_dir "D:\Games\Installed - Steam\steamapps\common\H2EK\tags"

2. In Guerrila -> File -> Run Tool -> Select "build cache file" & browse to scenario file.

3. Click "Ok". Map file will be saved to h2_maps_win64_dx11 directory.



/*--- Rebuilding Map from Tags via Command Line ---*/

NOTE: Supports compile flags! :)

1. Navigate to H2EK Folder via command line.

2. Run the Following

	tool build-cache-file scenarios\solo\01b_spacestation\01b_spacestation dx11_64 remastered_support



/*--- More Reference ---*/

Tool Documentation: https://c20.reclaimers.net/h2/tools/h2-ek/h2-tool/

guerilla -tags_dir "D:\Games\Installed - Steam\steamapps\common\H2EK\tags"

00a_introduction
01a_tutorial
01b_spacestation
03a_oldmombasa
03b_newmombasa
04a_gasgiant
04b_floodlab
05a_deltaapproach
05b_deltatowers
06a_sentinelwalls
06b_floodzone
07a_highcharity
07b_forerunnership
08a_deltacliffs
08b_deltacontrol



//////////////////////////////////
// H2A Weapon Audio Replacement //
//////////////////////////////////

1. Start by just replacing the tags in the "sound_remaster" folder with their corresponding
   tags in the "sound" folder. This works for *most* sounds. The exceptions:

   ".sound_looping" Files - These need to be preserved as-is.

   "*_lod.sound" Files - These are remaster additions that don't exist in the classic game.
                         They're distant, more echoed versions of weapon sounds to be
                         generated by NPC fire. Can be deleted as long as the min/max distance
                         of the weapon's "fire.sound" variant is updated via Guerilla. Otherwise,
                         enemy fire can't be heard at a distance. [AUTO?]

   "*_swtnr.sound" Files - These are remaster additions that don't exist in the classic game.
                           They're followup sounds to be played after the classic sound. Safe
                           to delete; they just won't play.

   "*_lfe.sound" Files - Also remaster additions that don't exist in the classic game. These sounds
                         seem to be an additional bass layer that plays alongside standard sounds
                         to give them more punch. Can be safely deleted.

   "*_bottom.sound" Files - A single remaster addition for the plasma rifle. Adds a fire sound
                            specifically from the bottom of the gun (???). Can be safely deleted.



2. Manual Fixes (Is Guerrilla scripting possible?)

    Weapons
        x Plasma Pistol - max fire dist = 120
        x Plasma Rifle - "***_bottom.sound" file needs to be deleted
        x Energy Sword - sword_ready.sound (classic) --> energy_sword_ready.sound (remaster)
        x Sniper Rifle - Zoom in/out
        x Magnum
        x Beam Rifle - beam_rifle_zoom_in.sound (classic) -> beamrifle_zoom/in.sound (remaster), max dist = 300
        x Rocket - rocket_expl.sound (classic) -> projectile_exp/close.sound (remaster)
                 zoom in/out (same as sniper?)
        x Chain Gun - Remastered warthog turret has annoying whirring noise. Can remove by deleting
                      "weapons/chain_gun/chaingun_spin.sound" in "sound_remaster".
        x Fuel Rod Gun - Explosion sounds too punchy? Tag files look good. Gonna just leave it.
        o Sentinel Beam - Weapon audio stored in character folder. Needs to be updated there.
                          Requires replacing the tags of the "sent_gun_lod" directory with the classic
                          directory's "sent_gun" tags and setting each of the actual "sent_gun" tags'
                          max distance to a value around 120. Also, big sentinel needles sound wrong
                          and remastered sentinel beam doesn't tick when empty.
        [MANUAL] Sound Max Distance Adjustments
          Sentinel Beam  [characters\sentinel\sentinel_gun\sent_gun\*] - 120
          Plasma Pistol  []                                            - 120
          Beam Rifle     []                                            - 300

    Characters
        Sentinel Enforcer
          needler_fire_sentinel_enforcer.sound (classic) -> sentinel_enforcer_laser.sound (remaster)
          [MANUAL] Need to toggle "play only in legacy mode" flag on fire tag
          [MANUAL] Need to update fire tag min dist = 5 and max dist = 75
          Note: The remastered primary fire actually sounds pretty good as a Enforcer rocket fire
                and helps broadcast the incoming salvo... Might make it optional later.



/*--- Changing Tags in Assembly ---*/

1. Open Assembly (Halo mod tool, not machine language)

2. Tools > Map Compressor > Set "Input Map" to selected MCC map > Click "De/Compress Map"

3. Open Map in New Tab > Tags tab

4. Find & Edit the appropriate tag. Then compress map again and play the game.