
////////////////////////
// Halo 2 MCC Modding //
////////////////////////



/*--- Overview ---*/

Mod Tools
  - Assembly: Used before official mod tools were released. Reads map files as tags and lets you
              edit those tag values directly. Can be used to compress/decompress maps.
  - Guerilla: An official, comprehensive tag editor.
  - Tool: A terribly named command line utility that does all kinds of stuff. Most important for
          us, it allows you to compile a bunch of tags into a .map file that can be played in MCC. 



/*--- Rebuilding Map from Tags in Guerilla ---*/

NOTE: Doesn't support compile flags, which is a problem for remastered campaign levels. In general
      probably just safest to do this via command line (see below).

0. Navigate to H2EK Folder via command line.

1. Open Guerrila

	guerilla.exe -tags_dir "D:\Games\Installed - Steam\steamapps\common\H2EK\tags"

2. In Guerrila -> File -> Run Tool -> Select "build cache file" & browse to scenario file.

3. Click "Ok". Map file will be saved to h2_maps_win64_dx11 directory.



/*--- Rebuilding Map from Tags via Command Line ---*/

NOTE: Supports compile flags! :)

1. Navigate to H2EK Folder via command line.

2. Run the Following

	tool build-cache-file scenarios\solo\01b_spacestation\01b_spacestation remastered_support

	tool build-cache-file scenarios\solo\01b_spacestation\01b_spacestation dx11_64 remastered_support



/*--- More Reference ---*/

Tool Documentation: https://c20.reclaimers.net/h2/tools/h2-ek/h2-tool/



//////////////////////////////////
// H2A Weapon Audio Replacement //
//////////////////////////////////

1. Start by just replacing the tags in the "sound_remaster" folder with their corresponding
   tags in the "sound" folder. This works for *most* sounds. The exceptions:

   ".sound_looping" Files - These need to be preserved as-is.

   "*_lod.sound" Files - These are remaster additions that don't exist in the classic game.
                         They're distant, more echoed versions of weapon sounds to be
                         generated by NPC fire. Can be deleted as long as the min/max distance
                         of the weapon's "fire.sound" variant is updated via Guerilla. Otherwise,
                         enemy fire can't be heard at a distance. [AUTO?]

   "*_swtnr.sound" Files - These are remaster additions that don't exist in the classic game.
                           They're followup sounds to be played after the classic sound. Safe
                           to delete; they just won't play.

   "*_lfe.sound" Files - Also remaster additions that don't exist in the classic game. These sounds
                         seem to be an additional bass layer that plays alongside standard sounds
                         to give them more punch. Can be safely deleted.

   "*_bottom.sound" Files - A single remaster addition for the plasma rifle. Adds a fire sound
                            specifically from the bottom of the gun (???). Can be safely deleted.



2. Manual Fixes (Is Guerrilla scripting possible?)

    Weapons
        Plasma Pistol - Max Audio Distance = 120
        Plasma Rifle - "***_bottom.sound" file needs to be deleted
        Energy Sword - sword_ready.sound (classic) --> energy_sword_ready.sound (remaster)
        Sentinel Beam - Weapon audio stored in Character folder! Needs to be updated there.





/*--- Changing Tags in Assembly ---*/

1. Open Assembly (Halo mod tool, not machine language)

2. Tools > Map Compressor > Set "Input Map" to selected MCC map > Click "De/Compress Map"

3. Open Map in New Tab > Tags tab

4. Find & Edit the appropriate tag. Then compress map again and play the game.